<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>shadergraph-override-uniform | Askhat Mudarisov</title>
<meta name="generator" content="Jekyll v3.10.0">
<meta property="og:title" content="shadergraph-override-uniform">
<meta property="og:locale" content="en_US">
<meta name="description" content="Intro Sometimes you want to change how URP shader will perform calculations and of course you can change the source code of URP package and then pass your custom data. Hovewer if you don‚Äôt want to go this way and stay inside shadergraph (URP package contains a lot of hlsl text based shaders) there is a somewhat ‚Äúhacky‚Äù way. Of course Unity will never tell you how to do this! In this article I will show you how to override ambient color per object and lighting functions (which is not directrly accesable) will use our custom value. Preparation Sure you know how to do this. Create basic scene. Add a couple of objects, I use a couple of spheres. Set some ambient color Window -&gt; Rendering -&gt; Lighting -&gt; Environment -&gt; Environment Lighting -&gt; Source = solid, Color = (I choose red) Create lit shadergraph Right click -&gt; Create -&gt; Shader Graph -&gt; URP -&gt; Lit Shader -&gt; Name it! Result : Shader Graph Open shadergraph by double clicking. Add new property of type Color, drag it in empty place. The main actor here will be a custom function node. Hit space and start typing ‚Äúcustom function‚Äù. Replicate node settings as shows. Code : unity_SHAr.w = Ambient.r; unity_SHAg.w = Ambient.g; unity_SHAb.w = Ambient.b; Out=In; Ambient color stored in something called ‚ÄúSpherical Harmonics‚Äù coefficients. We only interested in last value of each color. The idea here is to passthrough any value so Out = In. Our trick will work only if custom node connected to any inputs of master. Apply Create new material : Right click shadergraph asset -&gt; Creat -&gt; Material. It will assign our newly created shader with default parameters. Assing material to one of the meshes and try to change our color parameter. Outro Congrats not you have one more powerfull tool to survive in URP nightmare!!! BTW this way you can read URP sources and learn any uniform value it uses and then change it‚Äôs behaviour.">
<meta property="og:description" content="Intro Sometimes you want to change how URP shader will perform calculations and of course you can change the source code of URP package and then pass your custom data. Hovewer if you don‚Äôt want to go this way and stay inside shadergraph (URP package contains a lot of hlsl text based shaders) there is a somewhat ‚Äúhacky‚Äù way. Of course Unity will never tell you how to do this! In this article I will show you how to override ambient color per object and lighting functions (which is not directrly accesable) will use our custom value. Preparation Sure you know how to do this. Create basic scene. Add a couple of objects, I use a couple of spheres. Set some ambient color Window -&gt; Rendering -&gt; Lighting -&gt; Environment -&gt; Environment Lighting -&gt; Source = solid, Color = (I choose red) Create lit shadergraph Right click -&gt; Create -&gt; Shader Graph -&gt; URP -&gt; Lit Shader -&gt; Name it! Result : Shader Graph Open shadergraph by double clicking. Add new property of type Color, drag it in empty place. The main actor here will be a custom function node. Hit space and start typing ‚Äúcustom function‚Äù. Replicate node settings as shows. Code : unity_SHAr.w = Ambient.r; unity_SHAg.w = Ambient.g; unity_SHAb.w = Ambient.b; Out=In; Ambient color stored in something called ‚ÄúSpherical Harmonics‚Äù coefficients. We only interested in last value of each color. The idea here is to passthrough any value so Out = In. Our trick will work only if custom node connected to any inputs of master. Apply Create new material : Right click shadergraph asset -&gt; Creat -&gt; Material. It will assign our newly created shader with default parameters. Assing material to one of the meshes and try to change our color parameter. Outro Congrats not you have one more powerfull tool to survive in URP nightmare!!! BTW this way you can read URP sources and learn any uniform value it uses and then change it‚Äôs behaviour.">
<link rel="canonical" href="https://askhento.github.io/unity/2025/07/13/shadergraph-override-uniform.html">
<meta property="og:url" content="https://askhento.github.io/unity/2025/07/13/shadergraph-override-uniform.html">
<meta property="og:site_name" content="Askhat Mudarisov">
<meta property="og:image" content="https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image-3.png">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2025-07-13T00:00:00+00:00">
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image-3.png">
<meta property="twitter:title" content="shadergraph-override-uniform">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-07-13T00:00:00+00:00","datePublished":"2025-07-13T00:00:00+00:00","description":"Intro Sometimes you want to change how URP shader will perform calculations and of course you can change the source code of URP package and then pass your custom data. Hovewer if you don‚Äôt want to go this way and stay inside shadergraph (URP package contains a lot of hlsl text based shaders) there is a somewhat ‚Äúhacky‚Äù way. Of course Unity will never tell you how to do this! In this article I will show you how to override ambient color per object and lighting functions (which is not directrly accesable) will use our custom value. Preparation Sure you know how to do this. Create basic scene. Add a couple of objects, I use a couple of spheres. Set some ambient color Window -&gt; Rendering -&gt; Lighting -&gt; Environment -&gt; Environment Lighting -&gt; Source = solid, Color = (I choose red) Create lit shadergraph Right click -&gt; Create -&gt; Shader Graph -&gt; URP -&gt; Lit Shader -&gt; Name it! Result : Shader Graph Open shadergraph by double clicking. Add new property of type Color, drag it in empty place. The main actor here will be a custom function node. Hit space and start typing ‚Äúcustom function‚Äù. Replicate node settings as shows. Code : unity_SHAr.w = Ambient.r; unity_SHAg.w = Ambient.g; unity_SHAb.w = Ambient.b; Out=In; Ambient color stored in something called ‚ÄúSpherical Harmonics‚Äù coefficients. We only interested in last value of each color. The idea here is to passthrough any value so Out = In. Our trick will work only if custom node connected to any inputs of master. Apply Create new material : Right click shadergraph asset -&gt; Creat -&gt; Material. It will assign our newly created shader with default parameters. Assing material to one of the meshes and try to change our color parameter. Outro Congrats not you have one more powerfull tool to survive in URP nightmare!!! BTW this way you can read URP sources and learn any uniform value it uses and then change it‚Äôs behaviour.","headline":"shadergraph-override-uniform","image":"https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image-3.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://askhento.github.io/unity/2025/07/13/shadergraph-override-uniform.html"},"url":"https://askhento.github.io/unity/2025/07/13/shadergraph-override-uniform.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
  <link rel="manifest" href="/assets/images/site.webmanifest">
  <link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="#abd55b">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://askhento.github.io/feed.xml" title="Askhat Mudarisov">
<!-- <link
  rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css"
/> -->
<link rel="stylesheet" title="Atom One Dark" href="/assets/css/atom-one-dark.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<style>

  .copy-code-button {
    background-color: #bcbcbc95;
    border: 2px solid #5757578a;
    color: rgb(151, 151, 151);
    position: absolute;
    bottom: 5px;
    right: 5px;
    padding: 15px 20px;
    text-align: center;
    /* display: block; */
    font-size: 16px;
    border-radius: 2px;
    transition-duration: 0.4s;
    /* float:right; */
  }

  .copy-code-button:hover, .copy-code-button.copied{
    background-color: #f1f1f1; /* Green */
    border: 2px solid #303030;
    color: rgb(42, 42, 42);
  }

  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    left: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>

<script>
  // Init highlight js
  document.addEventListener("DOMContentLoaded", function (event) {
    var els = document.querySelectorAll("pre code");

    function addLangData(block) {
      var outer = block.parentElement.parentElement.parentElement;
      var lang = block.getAttribute("data-lang");
      for (var i = 0; i < outer.classList.length; i++) {
        var cls = outer.classList[i];
        if (cls.startsWith("language-")) {
          lang = cls;
          break;
        }
      }
      if (!lang) {
        cls = block.getAttribute("class");
        lang = cls ? cls.replace("hljs ", "") : "";
      }
      if (lang.startsWith("language-")) {
        lang = lang.substr(9);
      }
      block.setAttribute("class", "hljs " + lang);
      block.parentNode.setAttribute("data-lang", lang);
    }

    function addCopyButton(block) {
      const copyCodeButton = document.createElement("button");
      // Set the button text to 'Can you click me?'
      copyCodeButton.innerText = "COPY!";
      copyCodeButton.classList.add("copy-code-button");
      // copyCodeButton.classList.add("hljs");

      block.parentElement.appendChild(copyCodeButton);

      const code = block.innerText;

      copyCodeButton.addEventListener("click", (event) => {
        // Copy the code to the user's clipboard
        window.navigator.clipboard.writeText(code);

        copyCodeButton.innerText = "DONE!";
        copyCodeButton.classList.add("copied");

        // After 2 seconds, reset the button to its initial UI
        setTimeout(() => {
          copyCodeButton.innerText = "COPY!";
          copyCodeButton.classList.remove("copied");
        }, 2000);
      });
    }

    function addBadge(block) {
      var enabled = ("true" || "true").toLowerCase();
      if (enabled == "true") {
        var pre = block.parentElement;
        pre.classList.add("badge");
      }
    }

    function handle(block) {
      addLangData(block);
      addBadge(block);
      addCopyButton(block);
      hljs.highlightBlock(block);
    }

    for (var i = 0; i < els.length; i++) {
      var el = els[i];
      handle(el);
    }
  });
</script>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="Askhat Mudarisov" src="" onerror="this.style.display='none'">
  Askhat Mudarisov
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/home.html">HOME</a><a class="page-link" href="/tags.html">TAGS</a>




</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('on' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">shadergraph-override-uniform</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2025-07-13T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jul 13, 2025
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 2 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#unity">#unity</a><a class="post-tag" href="/tags.html#shadergraph">#shadergraph</a><a class="post-tag" href="/tags.html#hacks">#hacks</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h1 id="intro">Intro</h1>

<p>Sometimes you want to change how URP shader will perform calculations and of course you can change the source
code of URP package and then pass your custom data. Hovewer if you don‚Äôt want to go this way and stay inside
shadergraph (URP package contains a lot of hlsl text based shaders) there is a somewhat ‚Äúhacky‚Äù way. 
Of course Unity will never tell you how to do this!</p>

<p>In this article I will show you how to override ambient color per object and lighting functions (which is not directrly accesable)
will use our custom value.</p>

<h1 id="preparation">Preparation</h1>

<p>Sure you know how to do this.</p>
<ul>
  <li>Create basic scene.</li>
  <li>Add a couple of objects, I use a couple of spheres.</li>
  <li>Set some ambient color Window -&gt; Rendering -&gt; Lighting -&gt; Environment -&gt; Environment Lighting -&gt; Source = solid, Color = (I choose red)</li>
  <li>Create lit shadergraph Right click -&gt; Create -&gt; Shader Graph -&gt; URP -&gt; Lit Shader -&gt; Name it!</li>
</ul>

<p>Result :</p>

<p><img src="https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image.png" alt="alt text"></p>

<h1 id="shader-graph">Shader Graph</h1>

<p>Open shadergraph by double clicking.</p>

<p><img src="https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image-1.png" alt="alt text"></p>

<p>Add new property of type Color, drag it in empty place. 
The main actor here will be a custom function node. Hit space and start typing ‚Äúcustom function‚Äù. 
Replicate node settings as shows.</p>

<p><img src="https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image-2.png" alt="alt text"></p>

<p>Code :</p>
<div class="language-hlsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">unity_SHAr</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">Ambient</span><span class="p">.</span><span class="n">r</span><span class="p">;</span>
<span class="n">unity_SHAg</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">Ambient</span><span class="p">.</span><span class="n">g</span><span class="p">;</span>
<span class="n">unity_SHAb</span><span class="p">.</span><span class="n">w</span> <span class="o">=</span> <span class="n">Ambient</span><span class="p">.</span><span class="n">b</span><span class="p">;</span>

<span class="n">Out</span><span class="o">=</span><span class="n">In</span><span class="p">;</span>
</code></pre></div></div>

<p>Ambient color stored in something called ‚ÄúSpherical Harmonics‚Äù coefficients. We only interested in last value of each color.
The idea here is to passthrough any value so Out = In. Our trick will work only if custom node connected to any inputs of master.</p>

<p><img src="https://askhento.github.io/assets/images/2025-07-13-shadergraph-override-uniform-image-3.png" alt="alt text"></p>

<h1 id="apply">Apply</h1>

<p>Create new material : Right click shadergraph asset -&gt; Creat -&gt; Material. It will assign our newly created shader with default parameters.</p>

<p>Assing material to one of the meshes and try to change our color parameter.</p>

<p><img src="https://askhento.github.io/assets/images/turtle_ambient_color0.gif" alt="alt text"></p>

<h1 id="outro">Outro</h1>

<p>Congrats not you have one more powerfull tool to survive in URP nightmare!!!</p>

<p>BTW this way you can read URP sources and learn any uniform value it uses and then change it‚Äôs behaviour.</p>



    </div>

</article>
<div class="post-comments">
        

<section id="comments">
  <div class="comment-actions">
    <h2>Comments <span id="comments-count"></span>
</h2>
    <a class="button" href="https://github.com/Askhento/askhento.github.io/issues/9">Post comment</a>
  </div>
  <div id="comments-wrapper">Loading...</div>
</section>

<!-- Comments script -->
<script>
  const loadScript = (src) => {
    const scriptElement = document.createElement("script");
    document.body.appendChild(scriptElement);

    return new Promise((resolve) => {
      scriptElement.onload = resolve;

      // Important to register onload before setting src
      scriptElement.src = src;
    });
  };

  const commentsSection = document.getElementById("comments");
  const commentsWrapper = commentsSection.querySelector("#comments-wrapper");
  const commentsCount = commentsSection.querySelector("#comments-count");

  const fetchComments = async () => {
    try {
      const commentsURL =
        "https://api.github.com/repos/Askhento/askhento.github.io/issues/9/comments";
      const comments = await (await fetch(commentsURL)).json();
      initRenderComments(comments);
    } catch (e) {
      commentsWrapper.innerHTML = `<p>Unable to retrieve the comments for this post.</p>`;
    }
  };

  const commentScripts = [
    "https://unpkg.com/marked@0.3.6/marked.min.js",
    "https://unpkg.com/dompurify@1.0.8/dist/purify.min.js",
    "https://unpkg.com/dayjs@1.8.21/dayjs.min.js",
    "https://unpkg.com/dayjs@1.7.8/plugin/relativeTime.js",
  ];

  // Reminder: this gets called when the viewport intersects with the comments section
  const initRenderComments = async (comments) => {
    if (!comments.length) {
      commentsWrapper.innerHTML = `<p>No comments yet üëÄ Be the first to post!</p>`;
      return;
    }

    // Load all comment script dependencies async
    await Promise.all(commentScripts.map((script) => loadScript(script)));
    renderComments(comments);
  };

  const renderComments = (comments) => {
    // load the relativeTime plugin for dayjs so we can express dates relative to now
    dayjs.extend(dayjs_plugin_relativeTime);

    commentsCount.innerText = `(${comments.length})`;

    const commentsList = document.createElement("ol");
    commentsList.className = "comments-list";
    commentsList.setAttribute("aria-label", "Comments on this blog post");

    commentsList.innerHTML = comments
      .sort((comment1, comment2) => {
        return comment1.created_at < comment2.created_at ? 1 : -1;
      })
      .map((comment) => {
        const datePosted = dayjs(comment.created_at).fromNow();
        const user = comment.user;
        const body = DOMPurify.sanitize(marked(comment.body));
        const postedByAuthor = comment.author_association === "OWNER";
        const edited = comment.created_at !== comment.updated_at;

        /*
<img src="${
  user.avatar_url
}" alt="" aria-hidden="true" class="post-comment-avatar circle">
${
  postedByAuthor
    ? '<span class="post-comment-author" data-shape="round" data-size="xs">Author</span>'
    : ""
}
${
  edited
    ? `<span class="post-comment-edited">Edited</span>`
    : ""
}
*/
        return `<li class="post">
                    <article class="post-comment">
                        <header class="flex align-center flex-wrap gap-0 relative">
                            
                            <a
                                href="https://github.com/${user.login}"
                                class="heading"
                                target="_blank"
                                rel="noreferrer noopener"
                            >
                                ${user.login}
                            </a>
                            <time datetime="${comment.created_at}">${datePosted}</time></div>
             
                        
                        </header>
                        <div class="post-comment-body">${comment.body}</div>
                    </article>
                 </li>`;
      })
      .join("");

    commentsWrapper.innerHTML = "";
    commentsWrapper.appendChild(commentsList);
  };

  const commentsObserver = new IntersectionObserver(
    (entries, self) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          fetchComments(); // this is the important part
          self.unobserve(entry.target);
        }
      });
    },
    { rootMargin: "200px 0px 0px 0px" }
  );

  commentsObserver.observe(commentsSection);
</script>
 
    </div>

    <div class="post-nav">
<a class="previous" href="/tutorial/2022/10/11/matrix-transformations-for-visual-learners.html" title="Matrix transformations for visual learners">Matrix transformations for visual learners</a><span></span>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li>
          <a class="post-link" href="/tutorial/2022/10/07/navigation-arrow.html" title="">Navigation Arrow</a>
        </li>
<li>
          <a class="post-link" href="/unity/2025/07/13/shadergraph-override-uniform.html" title="">shadergraph-override-uniform</a>
        </li>
<li>
          <a class="post-link" href="/good_soft/2022/08/31/software-finds.html" title="">Some good software finds</a>
        </li>
<li>
          <a class="post-link" href="/tutorial/2022/10/11/matrix-transformations-for-visual-learners.html" title="">Matrix transformations for visual learners</a>
        </li>
</ul>
    </div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div></div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
